<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Fors3c">
    
    <title>
        
            Go控制流 |
        
        Fors3c&#39;s技术小木屋
    </title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="shortcut icon" href="/images/logo.svg">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"fors3cdream.github.io","root":"/","language":"zh-CN","path":"search.xml"};
    KEEP.theme_config = {"toc":{"enable":false,"number":false,"expand_all":false,"init_open":false},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.svg","favicon":"/images/logo.svg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"保持好奇，保持学习，保持对技术的热诚！"},"scroll":{"progress_bar":{"enable":false},"percent":{"enable":false}}},"local_search":{"enable":false,"preload":false},"code_copy":{"enable":false,"style":"default"},"pjax":{"enable":false},"lazyload":{"enable":false},"version":"3.4.1"};
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 月前","year":"%s 年前"};
  </script>
<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>


<body>
<div class="progress-bar-container">
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            <a class="logo-title" href="/">
                Fors3c&#39;s技术小木屋
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                分类
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                标签
                            </a>
                        </li>
                    
                    
                </ul>
            </div>
            <div class="mobile">
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">分类</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">标签</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Go控制流</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.svg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Fors3c</span>
                        
                            <span class="author-label">Lv2</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;2021-03-22 23:20:39
    </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Go/">Go</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h3 id="Go控制流"><a href="#Go控制流" class="headerlink" title="Go控制流"></a>Go控制流</h3><h4 id="if语句的语法"><a href="#if语句的语法" class="headerlink" title="if语句的语法"></a>if语句的语法</h4><p>在Go中，不需要在条件中使用括号，<code>else</code>子句可选。大括号是必须的。</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    x := <span class="number">27</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> x%<span class="number">2</span> == <span class="number">0</span>{</span><br><span class="line">        fmt.Println(x, <span class="string">"is even"</span>)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h5 id="复合if语句"><a href="#复合if语句" class="headerlink" title="复合if语句"></a>复合if语句</h5><p>Go支持复合<code>if</code>语句，可以使用<code>else if</code>语句进行嵌套，示例：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">givemeanumber</span><span class="params">()</span> <span class="title">int</span></span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">if</span> num := givemeanumber(); num &lt; <span class="number">0</span> {</span><br><span class="line">        fmt.Println(num, <span class="string">" is negative"</span>)</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> num &lt; <span class="number">10</span> {</span><br><span class="line">        fmt.Println(num, <span class="string">" has only one digit"</span>)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        fmt.Println(num, <span class="string">" has multiple digits"</span>)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>在Go中，<code>if</code>块内声明变量是惯用的方式，是一种常见的约定进行高效编程的方式。</p>
<h4 id="switch语句"><a href="#switch语句" class="headerlink" title="switch语句"></a>switch语句</h4><p>Go支持<code>switch</code>语句，可以使用<code>switch</code>来避免链接多个<code>if</code>语句。使用<code>switch</code>语句，就不需要维护和读取包含多个<code>if</code>语句的代码。</p>
<p><code>switch</code>语句不需要括号，示例如下：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"math/rand"</span></span><br><span class="line">    <span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    sec := time.Now().Unix()</span><br><span class="line">    rand.Seed(sec)</span><br><span class="line">    i := rand.Int31n(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> i {</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            fmt.Print(<span class="string">"Zero..."</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            fmt.Print(<span class="string">"One..."</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            fmt.Print(<span class="string">"Two..."</span>)</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            fmt.Print(<span class="string">"No match..."</span>)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"ok"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><b>使用多个表达式：</b><br>注意：在<code>case</code>语句的表达式中包含的值对应于<code>switch</code>语句验证的变量的数据类型。</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">location</span><span class="params">(city <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">string</span>, <span class="keyword">string</span>)</span></span> {</span><br><span class="line">    <span class="keyword">var</span> region <span class="keyword">string</span></span><br><span class="line">    <span class="keyword">var</span> contient <span class="keyword">string</span> </span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> city {</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"Delhi"</span>, <span class="string">"Hyderabad"</span>, <span class="string">"Mumbai"</span>, <span class="string">"Chennai"</span>, <span class="string">"Kochi"</span>:</span><br><span class="line">            region, contient = <span class="string">"India"</span>, <span class="string">"Asia"</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">"Lafayette"</span>, <span class="string">"Louisville"</span>, <span class="string">"Boulder"</span>:</span><br><span class="line">            region, contient = <span class="string">"Colorado"</span>, <span class="string">"USA"</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">"Irvine"</span>, <span class="string">"Los Angeles"</span>, <span class="string">"San Diego"</span>:</span><br><span class="line">            region, contient = <span class="string">"California"</span>, <span class="string">"USA"</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            region, contient = <span class="string">"Unknown"</span>, <span class="string">"Unknown"</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> region, contient</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    region, contient := location(<span class="string">"Irvie"</span>)</span><br><span class="line">    fmt.Printf(<span class="string">"John works in %s, %s\n"</span>, region, contient)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><b>调用函数：</b><br><code>switch</code>还可以调用函数。示例如下：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">switch</span> time.Now().Weekday().String() {</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"Monday"</span>, <span class="string">"Tuesday"</span>, <span class="string">"Wednesday"</span>, <span class="string">"Thursday"</span>, <span class="string">"Friday"</span>:</span><br><span class="line">            fmt.Println(<span class="string">"It's time to learn some Go."</span>)</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            fmt.Println(<span class="string">"It's weekend, time to rest!"</span>)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    fmt.Println(time.Now().Weekday().String())</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>switch</code>语句调用函数时，无需更改表达式即可修改其逻辑，因为始终会验证函数返回的内容。</p>
<p>此外，还可以在<code>case</code>语句中调用函数，例如，使用正则表达式来匹配特定的模式。示例如下：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"regexp"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> email = regexp.MustCompile(<span class="string">`^[^@]+@[^@.]+\.[^@.]+`</span>)</span><br><span class="line">    <span class="keyword">var</span> phone = regexp.MustCompile(<span class="string">`^[(]?[0-9][0-9][0-9][). \-]*[0-9][0-9][0-9][.\-]?[0-9][0-9][0-9][0-9]`</span>)</span><br><span class="line"></span><br><span class="line">    contact := <span class="string">"foo@bar.com"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> {</span><br><span class="line">    <span class="keyword">case</span> email.MatchString(contact):</span><br><span class="line">        fmt.Println(contact, <span class="string">"is an email"</span>)</span><br><span class="line">    <span class="keyword">case</span> phone.MatchString(contact):</span><br><span class="line">        fmt.Println(contact, <span class="string">"is a phone number"</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        fmt.Println(contact, <span class="string">"is not recognized"</span>)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><b>可以在case语句中加入<code>fallthrough</code>来进入下一个近邻的<code>case</code>语句。</b></p>
<h4 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h4><p>另一个常用控制流是循环，Go只使用一个循环构造，即<code>for</code>循环。</p>
<h5 id="基本for循环语法"><a href="#基本for循环语法" class="headerlink" title="基本for循环语法"></a>基本for循环语法</h5><figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    sum := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++ {</span><br><span class="line">        sum += i</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    fmt.Prinln(<span class="string">"sum of 1..100 is "</span>, sum)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>与<code>if</code>和<code>switch</code>语句一样，<code>for</code>循环表达式不需要括号。但是，大括号是必须的。</p>
<p>分号<code>;</code>分隔<code>for</code>循环的三个组件：</p>
<ul>
<li>在第一次迭代前执行的初始化语句（可选）</li>
<li>每次迭代前执行的条件表达式，条件为<code>false</code>时，循环停止</li>
<li>每次迭代结束时执行的后处理语句（可选）</li>
</ul>
<h5 id="空预处理语句和后处理语句"><a href="#空预处理语句和后处理语句" class="headerlink" title="空预处理语句和后处理语句"></a>空预处理语句和后处理语句</h5><p>Go中没有<code>while</code>循环，可以使用<code>for</code>循环，此时预处理语句和后处理语句变得可选。</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"math/rand"</span></span><br><span class="line">    <span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> num <span class="keyword">int64</span></span><br><span class="line">    rand.Seed(time.Now().Unix())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> num != <span class="number">5</span> {</span><br><span class="line">        num = rand.Int63n(<span class="number">15</span>)</span><br><span class="line">        fmt.Println(num)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h5 id="无限循环和break语句"><a href="#无限循环和break语句" class="headerlink" title="无限循环和break语句"></a>无限循环和break语句</h5><p>在Go中实现无限循环时，不编写条件表达式，也不需要预处理和后处理语句，而是才去退出循环的方式进行编写。否则，逻辑永远不会退出。如果要退出循环，使用<code>break</code>关键字。</p>
<p>若要正确编写无限循环，<code>for</code>关键字后面使用大括号，如下所示：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"math/rand"</span></span><br><span class="line">    <span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> num <span class="keyword">int32</span></span><br><span class="line">    rand.Seed(sec)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">        fmt.Print(<span class="string">"Wrintting inside the loop..."</span>)</span><br><span class="line">        <span class="keyword">if</span> num = rand.Int31n(<span class="number">10</span>); num == <span class="number">5</span>{</span><br><span class="line">            fmt.Println(<span class="string">"finish!"</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        fmt.Println(num)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h5 id="Continue语句"><a href="#Continue语句" class="headerlink" title="Continue语句"></a>Continue语句</h5><p><code>continue</code>关键字用于跳过循环进入下一次循环。</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    sum := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> num := <span class="number">1</span>; num &lt;= <span class="number">100</span>; num++ {</span><br><span class="line">        <span class="keyword">if</span> num%<span class="number">5</span> == <span class="number">0</span> {</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        }</span><br><span class="line">        sum += num</span><br><span class="line">    }</span><br><span class="line">    fmt.Println(<span class="string">"The sum of 1 to 100, but excluding numbers divisible by 5, is"</span>, sum)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="defer、panic和recover函数"><a href="#defer、panic和recover函数" class="headerlink" title="defer、panic和recover函数"></a>defer、panic和recover函数</h4><p>Go中有一些不太常用的控制流：<code>defer</code>、<code>panic</code>和<code>recover</code>。这三种控制流是Go独有的。</p>
<h5 id="defer函数"><a href="#defer函数" class="headerlink" title="defer函数"></a>defer函数</h5><p>在Go中，<code>defer</code>语句会推迟函数（包括任何参数）的执行，知道包含<code>defer</code>语句的代码块完成。通常情况下，当想要避免某些任务（如关闭文件或者运行清理进程）时，可以推迟某个函数的运行。</p>
<p>可以根据需要推迟任意多个函数。<code>defer</code>语句按逆序运行，先运行最后一个，最后运行第一个。</p>
<p>示例代码如下：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i&lt;=<span class="number">4</span>; i++ {</span><br><span class="line">        <span class="keyword">defer</span> fmt.Prinlnt(<span class="string">"defered"</span>, -i)</span><br><span class="line"></span><br><span class="line">        fmt.Println(<span class="string">"regular"</span>, i)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>输入如下：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">regular 1</span><br><span class="line">regular 2</span><br><span class="line">regular 3</span><br><span class="line">regular 4</span><br><span class="line">deferred -4</span><br><span class="line">deferred -3</span><br><span class="line">deferred -2</span><br><span class="line">deferred -1</span><br></pre></td></tr></tbody></table></figure>

<p><code>defer</code>函数的一个典型用例实在使用完文件后将其关闭，如下所示：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"io"</span></span><br><span class="line">    <span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    f, err := os.Create(<span class="string">"notes.txt"</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">defer</span> f.<span class="built_in">close</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> _, err = io.WriteString(f, <span class="string">"learning Go!"</span>); err != <span class="literal">nil</span> {</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    f.Sync()</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>在创建或打开某个文件后，可以推迟<code>f.Close()</code>函数的执行，以免在向文件中写入内容后忘记关闭该文件。</p>
<h5 id="panic函数"><a href="#panic函数" class="headerlink" title="panic函数"></a>panic函数</h5><p>运行时错误会使Go程序进入紧急状态。可以强制程序进入紧急状态，但运行时错误（例如数组索引超出范围、取消对空指针的引用）也可能会导致进入紧急状态。</p>
<p><code>panic</code>函数会停止正常的控制流，所有推迟的函数调用都会正常运行。进程会在堆栈中继续，知道所有函数都返回。然后，程序会崩溃并记录日志。此日志内容包含错误和堆栈跟踪，有助于诊断问题的根本原因。</p>
<p>调用<code>panic</code>函数时，可以添加任意值作为参数。通常会发送一条消息，说明为什么会进入紧急状态。</p>
<p>例如，将<code>panic</code>和<code>defer</code>函数组合起来，以了解控制流中断的方式，但是，继续运行任何清理进程。代码如下：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    g(<span class="number">0</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Program finished successfully!"</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">g</span><span class="params">(i <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    <span class="keyword">if</span> i &gt; <span class="number">3</span> {</span><br><span class="line">        fmt.Println(<span class="string">"Panicing!"</span>)</span><br><span class="line">        <span class="built_in">panic</span>(<span class="string">"Panic in g() (major)"</span>)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">defer</span> fmt.Println(<span class="string">"Defer in g()"</span>, i)</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"Printing in g()"</span>, i)</span><br><span class="line"></span><br><span class="line">    g(i+<span class="number">1</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>输入如下：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Printing in g() 0</span><br><span class="line">Printing in g() 1</span><br><span class="line">Printing in g() 2</span><br><span class="line">Printing in g() 3</span><br><span class="line">Panicking!</span><br><span class="line">Defer in g() 3</span><br><span class="line">Defer in g() 2</span><br><span class="line">Defer in g() 1</span><br><span class="line">Defer in g() 0</span><br><span class="line">panic: Panic in g() (major)</span><br><span class="line"></span><br><span class="line">goroutine 1 [running]:</span><br><span class="line">main.g(0x4)</span><br><span class="line">        /Users/xxx/go/src/helloworld/main.go:13 +0x22e</span><br><span class="line">main.g(0x3)</span><br><span class="line">        /Users/xxx/go/src/helloworld/main.go:17 +0x17a</span><br><span class="line">main.g(0x2)</span><br><span class="line">        /Users/xxx/go/src/helloworld/main.go:17 +0x17a</span><br><span class="line">main.g(0x1)</span><br><span class="line">        /Users/xxx/go/src/helloworld/main.go:17 +0x17a</span><br><span class="line">main.g(0x0)</span><br><span class="line">        /Users/xxx/go/src/helloworld/main.go:17 +0x17a</span><br><span class="line">main.main()</span><br><span class="line">        /Users/xxx/go/src/helloworld/main.go:6 +0x2a</span><br><span class="line">exit status 2</span><br></pre></td></tr></tbody></table></figure>

<p>运行代码时发生的情况如下：</p>
<ol>
<li>一切正常运行。程序输出<code>g()</code>接收的值。</li>
<li>当<code>i</code>大于3时，程序进入紧急状态。会显示<code>Panicking</code>消息。此时，控制流中断，所有推迟的函数都开始输出<code>Defer in g()</code>。</li>
<li>程序崩溃，显示完整的堆栈跟踪。最后的<code>Program finished successfully!</code>不会显示。</li>
</ol>
<h5 id="recover函数"><a href="#recover函数" class="headerlink" title="recover函数"></a>recover函数</h5><p>在发生未预料到的严重错误时，系统通常会运行对<code>painic()</code>的调用。若要避免程序崩溃，可以使用<code>recover()</code>函数。</p>
<p>比如，想要避免程序崩溃，改为在内部报告错误。或者，想要先清理混乱情况，然后再让程序崩溃。比如，关闭与某个资源的连接，避免出现更多问题。</p>
<p>Go中内置函数<code>recover()</code>允许在出现紧急状况之后重新获得控制权。只能在已推迟的函数中使用此函数。如果调用<code>recover()</code>函数，则在正常运行的情况下，会返回<code>nil</code>，没有任何其他作用。</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> {</span><br><span class="line">        <span class="keyword">if</span> r := <span class="built_in">recover</span>(); r!=<span class="literal">nil</span>{</span><br><span class="line">            fmt.Println(<span class="string">"Recovered in main"</span>, r)</span><br><span class="line">        }</span><br><span class="line">    }()</span><br><span class="line">    g(<span class="number">0</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Program finished successfully!"</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">g</span><span class="params">(i <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    <span class="keyword">if</span> i&gt;<span class="number">3</span> {</span><br><span class="line">        fmt.Println(<span class="string">"Panicking!"</span>)</span><br><span class="line">        <span class="built_in">panic</span>(<span class="string">"Panic in g() (major)"</span>)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">defer</span> fmt.Println(<span class="string">"Defer in g()"</span>, i)</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"Printing in g()"</span>, i)</span><br><span class="line"></span><br><span class="line">    g(i+<span class="number">1</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>输出如下：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Printing in g() 0</span><br><span class="line">Printing in g() 1</span><br><span class="line">Printing in g() 2</span><br><span class="line">Printing in g() 3</span><br><span class="line">Panicking!</span><br><span class="line">Defer in g() 3</span><br><span class="line">Defer in g() 2</span><br><span class="line">Defer in g() 1</span><br><span class="line">Defer in g() 0</span><br><span class="line">Recovered in main Panic in g() (major)</span><br></pre></td></tr></tbody></table></figure>

<p>在<code>main()</code>函数中，会将一个可以调用<code>recover()</code>函数的匿名函数推迟。当程序处于紧急状态时，对<code>recover()</code>的调用无法返回<code>nil</code>。可以在此处执行一些操作来清理混乱。</p>
<p><code>panic</code>和<code>recover</code>组合是Go处理异常的管用方式。（类似与<code>try/catch</code>）</p>
<h4 id="控制流挑战"><a href="#控制流挑战" class="headerlink" title="控制流挑战"></a>控制流挑战</h4><h5 id="编写FizzBuzz程序"><a href="#编写FizzBuzz程序" class="headerlink" title="编写FizzBuzz程序"></a>编写FizzBuzz程序</h5><p>首先，编写一个用于输出数字(1-100)的程序，条件如下：</p>
<ul>
<li>如果可以被3整除，输出<code>Fizz</code></li>
<li>如果可以被5整除，输出<code>Buzz</code></li>
<li>如果可被3和5整除，则输出<code>FizzBuzz</code></li>
<li>如果都不符合上面的条件，则直接输出该数字的。</li>
</ul>
<p>尝试使用<code>switch</code>语句。</p>
<p>解决方案：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"strconv"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fizzbuzz</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="title">string</span></span> {</span><br><span class="line">    <span class="keyword">switch</span> {</span><br><span class="line">        <span class="keyword">case</span> i%<span class="number">15</span>==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"FizzBuzz"</span></span><br><span class="line">        <span class="keyword">case</span> i%<span class="number">5</span>==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"Buzz"</span></span><br><span class="line">        <span class="keyword">case</span> i%<span class="number">3</span>==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"Fizz"</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> strconv.Itoa(i)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;=<span class="number">100</span>; i++ {</span><br><span class="line">        fmt.Println(fizzbuzzz(i))</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h5 id="推测平方根"><a href="#推测平方根" class="headerlink" title="推测平方根"></a>推测平方根</h5><p>编写一个程序来推测数字的平方根。公示如下：</p>
<p><code>root = root - (root-x)/(2**root)</code></p>
<p>运行此公式的次数越多，就越接近数字的平方根。将<code>root</code>变量初始化为<code>1</code>，无论要查找其平方根的数字如何。重复次数最多10次，然后输出每次推测的结果。</p>
<p>如果获得的结果与前一次运行的结果相同，则可以停止循环。数字越大，需要运行的计算次数越多，但这里限定最多运行10次。</p>
<p>解决方案：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sqrt</span><span class="params">(num <span class="keyword">float64</span>)</span> <span class="title">float64</span></span> {</span><br><span class="line">    cur := <span class="number">1.0</span></span><br><span class="line">    prev := <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> count := <span class="number">1</span>; count &lt;= <span class="number">10</span>; count++ {</span><br><span class="line">        prev = cur</span><br><span class="line">        cur = prev - (prev - num)/(<span class="number">2</span>*prev)</span><br><span class="line">        <span class="keyword">if</span> cur == prev {</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line">        fmt.Prinlnt(<span class="string">"A guess for quare root is "</span>, cur)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cur</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> num <span class="keyword">float64</span> = <span class="number">25</span></span><br><span class="line">    fmt.Println(<span class="string">"Square root is: "</span>, sqrt(num))</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h5 id="如果用户输入的数字为负，则进入紧急状态"><a href="#如果用户输入的数字为负，则进入紧急状态" class="headerlink" title="如果用户输入的数字为负，则进入紧急状态"></a>如果用户输入的数字为负，则进入紧急状态</h5><p>程序接收用户输入的数字，根据条件进行后续代码执行，条件如下：</p>
<ul>
<li>持续接收用户输入整数，直到用户输入的是负数才退出</li>
<li>当用户输入负数时，使程序崩溃，然后输出堆栈跟踪错误。</li>
<li>如果数字是0，输出<code>0 is neither negative nor positive</code>。继续要求用户输入数字。</li>
<li>如果数字为正书，则输出<code>You entered: X</code>(X为输入的数字)。继续要求用户输入数字。</li>
</ul>
<p>解决方案：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    val := <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">        fmp.Print(<span class="string">"Enter number: "</span>)</span><br><span class="line">        fmt.Scanf(<span class="string">"%d"</span>, &amp;val)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> {</span><br><span class="line">            <span class="keyword">case</span> val &lt; <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">panic</span>(<span class="string">"You entered a negative number!"</span>)</span><br><span class="line">            <span class="keyword">case</span> val == <span class="number">0</span>:</span><br><span class="line">                fmt.Println(<span class="string">"0 is neither negative nor positive"</span>)</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                fmt.Println(<span class="string">"You entered: "</span>, val)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>考察无限循环和<code>switch</code>语句。</p>

        </div>

        

        
            <div class="article-nav">
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/ckmkmhw0600002ax9aw2whgwn.html"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Go函数和包</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>&nbsp;-&nbsp;
            
            2021&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Fors3c</a>
        </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动&nbsp;|&nbsp;主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.1</a>
        </div>
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    

    <div class="image-viewer-container">
    <img src="">
</div>


    

</main>



<script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/header-shrink.js"></script><script src="/js/back2top.js"></script><script src="/js/dark-light-toggle.js"></script>







<div class="post-scripts">
    
</div>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
