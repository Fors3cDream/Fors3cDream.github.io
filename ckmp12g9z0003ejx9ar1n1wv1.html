<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Fors3c">
    
    <title>
        
            Go函数和包 |
        
        Fors3c&#39;s技术小木屋
    </title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="shortcut icon" href="/images/logo.svg">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"fors3cdream.github.io","root":"/","language":"zh-CN","path":"search.xml"};
    KEEP.theme_config = {"toc":{"enable":false,"number":false,"expand_all":false,"init_open":false},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.svg","favicon":"/images/logo.svg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"保持好奇，保持学习，保持对技术的热诚！"},"scroll":{"progress_bar":{"enable":false},"percent":{"enable":false}}},"local_search":{"enable":false,"preload":false},"code_copy":{"enable":false,"style":"default"},"pjax":{"enable":false},"lazyload":{"enable":false},"version":"3.4.1"};
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 月前","year":"%s 年前"};
  </script>
<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>


<body>
<div class="progress-bar-container">
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            <a class="logo-title" href="/">
                Fors3c&#39;s技术小木屋
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                分类
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                标签
                            </a>
                        </li>
                    
                    
                </ul>
            </div>
            <div class="mobile">
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">分类</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">标签</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Go函数和包</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.svg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Fors3c</span>
                        
                            <span class="author-label">Lv2</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;2021-03-22 21:25:32
    </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Go/">Go</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><p>Go是一种强类型语言。这意味着声明每一个变量都绑定到特定的数据类型，并且只接受与此类型匹配的值。</p>
<p>Go有四类数据类型：</p>
<ul>
<li>基本类型：数字、字符串和布尔值</li>
<li>聚合类型：数组和结构</li>
<li>引用类型：指针、切片、映射、函数和通道</li>
<li>接口类型：接口</li>
</ul>
<h5 id="数字类型"><a href="#数字类型" class="headerlink" title="数字类型"></a>数字类型</h5><p>定义整型的关键字是<code>int</code>。Go提供了<code>int8</code>、<code>int16</code>、<code>int32</code>和<code>int64</code>类型，表示存储大小为<code>int</code>后数字位字节的整数。</p>
<p>当只使用<code>int</code>时，在32位系统上大小为32位，64位系统上为64位。</p>
<p>如果需要将数值表示为无符号，则可以使用<code>uint</code>，但仅当有特定原因时才使用此类型。Go也提供了指定大小的无符号整数类型。</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> integer8 <span class="keyword">int8</span> = <span class="number">125</span></span><br><span class="line"><span class="keyword">var</span> integer16 <span class="keyword">int16</span> = <span class="number">32768</span></span><br><span class="line"><span class="keyword">var</span> interger32 <span class="keyword">int32</span> = <span class="number">2147483645</span></span><br><span class="line"><span class="keyword">var</span> interger64 <span class="keyword">int64</span> = <span class="number">9223372036854775807</span></span><br></pre></td></tr></tbody></table></figure>

<p>在Go中将值从一种类型转换为另一种类型时，需要执行显式操作。</p>
<p><code>rune</code>是<code>int32</code>数据类型的别名，用于表示Unicode字符。</p>
<h5 id="浮点数字"><a href="#浮点数字" class="headerlink" title="浮点数字"></a>浮点数字</h5><p>Go提供两种浮点数类型：<code>float32</code>和<code>float64</code>。如果需要存储较大的数字，则可以使用这些类型。</p>
<h5 id="布尔型"><a href="#布尔型" class="headerlink" title="布尔型"></a>布尔型</h5><p>布尔型仅有两个值：<code>true</code>和<code>false</code>。可以使用关键字<code>bool</code>声明布尔类型。在Go中，不能将布尔类型隐式转换为0或1。必须显式执行此操作。</p>
<h5 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h5><p>Go中，<code>string</code>用于表示字符串数据类型。初始化字符串变量，需要在<code>"</code>中定义值。单引号<code>'</code>用于单个字符。</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> firstName <span class="keyword">string</span> = <span class="string">"John"</span></span><br><span class="line">lastName := <span class="string">"Doe"</span></span><br></pre></td></tr></tbody></table></figure>

<h5 id="默认值（零值）"><a href="#默认值（零值）" class="headerlink" title="默认值（零值）"></a>默认值（零值）</h5><ul>
<li><code>int</code>类型为 0 (包括所有子类型)</li>
<li><code>float32</code>和<code>float64</code>类型为 <code>+0.000000e+000</code></li>
<li><code>bool</code>类型是<code>false</code></li>
<li><code>string</code>类型是空值</li>
</ul>
<h4 id="创建函数"><a href="#创建函数" class="headerlink" title="创建函数"></a>创建函数</h4><h5 id="main函数"><a href="#main函数" class="headerlink" title="main函数"></a>main函数</h5><p>Go中所有可执行程序都具有此函数，因为它是程序的起点。程序中只能有一个<code>main()</code>函数。如果是创建Go包，则无需编写<code>main()</code>函数。</p>
<p><code>main()</code>函数没有任何参数，且不返回任何内容。如果要访问Go中的命令行参数，可以使用用于保存传递到程序的所有参数的<code>os包</code>h和<code>os.Args</code>变量来执行操作。</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"os"</span></span><br><span class="line">    <span class="string">"strconv"</span></span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    number1, _ := strconv.Atoi(os.Args[<span class="number">1</span>])</span><br><span class="line">    number2, _ := strconv.Atoi(os.Args[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"Sum: "</span>, number1+number2)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><code>os.Args</code>变量包含传递给程序的每个命令行参数。这些值的类型为<code>string</code>。</p>
<h5 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h5><p>语法如下：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">name</span><span class="params">(parameters)</span> <span class="params">(results)</span></span>{</span><br><span class="line">    <span class="comment">// code</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>使用<code>func</code>关键字定义函数，然后指定名称。在命名后，指定函数的参数列表（可指定零个或多个参数），还可以定义函数的返回类型（也可以是多个或零个）。示例如下：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"os"</span></span><br><span class="line">    <span class="string">"strconv"</span></span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    sum := sum(os.Args[<span class="number">1</span>], os.Args[<span class="number">2</span>])</span><br><span class="line">    fmt.Println(<span class="string">"Sum: "</span>, sum)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(number1 <span class="keyword">string</span>, number2 <span class="keyword">string</span>)</span> <span class="title">int</span></span>{</span><br><span class="line">    int1, _ := strconv.Atoi(number1)</span><br><span class="line">    int2, _ := strconv.Atoi(number2)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> int1+int2</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Go中还可以为函数的返回值设置名称，将其当做一个变量，重构<code>sum</code>函数如下：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(number1 <span class="keyword">string</span>, number2 <span class="keyword">string</span>)</span> <span class="params">(result <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    int1, _ := strconv.Atoi(number1)</span><br><span class="line">    int2, _ := strconv.Atoi(number2)</span><br><span class="line"></span><br><span class="line">    result = int1+int2</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>如果指定了返回值名称，需要将函数的结果值括在括号中。还可以在函数中使用该变量，并且只需要在末尾添加<code>return</code>行。在函数末尾编写<code>return</code>关键字非常简单方便，但在返回多个值时，不太建议采用这种方法。</p>
<p>假设一个函数，既要返回两数相加的和，又要返回两数相乘的值。示例代码如下：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calc</span><span class="params">(number1 <span class="keyword">string</span>, number2 <span class="keyword">string</span>)</span> <span class="params">(sum <span class="keyword">int</span>, mul <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    int1, _ := strconv.Atoi(number1)</span><br><span class="line">    int2, _ := strconv.Atoi(number2)</span><br><span class="line"></span><br><span class="line">    sum = int1 + int2</span><br><span class="line">    mul = int2 * int2</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h5 id="更改函数参数的值（指针）"><a href="#更改函数参数的值（指针）" class="headerlink" title="更改函数参数的值（指针）"></a>更改函数参数的值（指针）</h5><p>将值传递给函数时，函数中的每个更改都不会影响到调用方。Go是”按值传递“编程语言，意味着每次向函数传递值时，Go都会使用该值并创建本地副本（内存中的新变量）。函数中对该变量所做的更改都不会影响想函数发送的更改。</p>
<p>如果希望在函数中进行的更改会影响参数的值，则需要使用<code>指针</code>。</p>
<p><code>指针</code>是包含另一个变量的内存地址的变量，当发送指向某个变量的指针时，不会传递值，而是传递地址内存。因此，对该变量所做的每个更改都会影响调用方。</p>
<p>Go中，有两个运算符可用于处理指针：</p>
<ul>
<li><code>&amp;</code>运算符使用其后对象的地址</li>
<li><code>*</code>运算符取消引用指针。也就是说，可以前往指针中包含的地址访问其中的对象</li>
</ul>
<p>比如，定义一个可以更改用户昵称的函数：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">updateName</span><span class="params">(name *<span class="keyword">string</span>)</span></span> {</span><br><span class="line">    *name = <span class="string">"David"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>函数的参数中签名需要更改为<code>*类型</code>，以指明要接收指针。</p>
<h4 id="包"><a href="#包" class="headerlink" title="包"></a>包</h4><p>Go包与其他编程语言中的库或模块类似。可以打包代码，然后在其他位置重复使用。</p>
<p>通常情况下，默认包是<code>main</code>包。如果程序是<code>main</code>包的一部分，Go会生成二进制文件。运行该文件时，将调用<code>main</code>函数。</p>
<p>当使用<code>main</code>包时，程序将生成独立的可执行文件。但当程序不是<code>main</code>包的一部分时，Go会生成包存档文件(.a)。</p>
<p>包名称与导入路径的最后一个元素同名。如下导入<code>math/rand</code>包：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"math/rand"</span></span><br></pre></td></tr></tbody></table></figure>

<h5 id="创建包"><a href="#创建包" class="headerlink" title="创建包"></a>创建包</h5><p>在项目文件夹目录下创建<code>包名</code>文件夹，并新建<code>xx.go</code>源码。例如创建一个<code>calculator</code>文件夹，并在文件夹中新建<code>sum.go</code>文件。</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">    calculator/</span><br><span class="line">        sum.<span class="keyword">go</span></span><br></pre></td></tr></tbody></table></figure>

<p>用包名初始化<code>sum.go</code>文件：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> calculator</span><br></pre></td></tr></tbody></table></figure>

<p>现在可以开始编写包的函数和变量。Go不会提供<code>public</code>和<code>private</code>关键字，以指示是否可以从包的外部调用变量或函数。Go程序中必须遵循以下两个简单规则：</p>
<ul>
<li>以小写字母开始命名，为包专用内容</li>
<li>以大写字母开始命名，为公共内容</li>
</ul>
<p>示例代码：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> calculator</span><br><span class="line"></span><br><span class="line"><span class="comment">// 只能从包内调用</span></span><br><span class="line"><span class="keyword">var</span> logMessage = <span class="string">"[Log]"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算器版本，可以从包外部调用</span></span><br><span class="line"><span class="keyword">var</span> Version = <span class="string">"1.0.0"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 值减1，包内部能调用</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">internalSum</span><span class="params">(number <span class="keyword">int</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">    <span class="keyword">return</span> number - <span class="number">1</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 两数相加，包外部可调用</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sum</span><span class="params">(number1, number2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">    <span class="keyword">return</span> number1 + number2</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="创建模块"><a href="#创建模块" class="headerlink" title="创建模块"></a>创建模块</h4><p>如果已经将包的功能开发完毕，则可以将包组合到模块中了。包的模块指定了Go运行已组合代码所需的上下文（包括Go版本）。</p>
<p>模块有助于开发人员引用代码的特定版本，并更轻松地处理依赖项。另一个优点是，程序源代码无需严格存放到<code>$GOPATH/src</code>中。</p>
<p>创建模块时，需要在包目录下运行如下命令:</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod init github.com/xxx(user_name)/yyy(model_name)</span><br></pre></td></tr></tbody></table></figure>
<p>运行命令后，<code>github.com/xxx/yy</code>就会变成包的名称（如<code>github.com/Fors3cDream/calculator</code>）。在其他程序中，将使用该名称进行引用。命令还会创建一个名为<code>go.mod</code>的新文件。示例目录树如下：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">    calculator/</span><br><span class="line">        go.mod</span><br><span class="line">        sum.go</span><br></pre></td></tr></tbody></table></figure>

<p><code>go.mod</code>中知名了 <code>module</code>名和特定的Go版本。</p>
<p>若要在其他程序中引用此包，需要使用模块名称进行导入。这种情况下，包名称为<code>github/com/xxx/yyy</code>。</p>
<h5 id="引用本地包"><a href="#引用本地包" class="headerlink" title="引用本地包"></a>引用本地包</h5><p>示例程序目录树如下：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">    calculator/</span><br><span class="line">        go.mod</span><br><span class="line">        sum.go</span><br><span class="line">    helloworld/</span><br><span class="line">        main.go</span><br></pre></td></tr></tbody></table></figure>

<p><code>main.go</code>如下所示：</p>
<figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"github.com/Fors3cDream/calculator"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    total := calculator.Sum(<span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line">    <span class="built_in">println</span>(total)</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">"Version: "</span>, calculator.Version)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>尝试运行程序，将没有任何输出。因为需要通知Go用模块来引用其他包。需要在<code>helloworld</code>目录下运行一下命令：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod init helloword</span><br></pre></td></tr></tbody></table></figure>
<p>这将在<code>helloworld</code>目录下创建一个<code>go.mod</code>文件。因为引用的是本地副本，而不是模块的远程位置。需要修改<code>helloworld</code>下的<code>go.mod</code>文件如下：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module helloworld</span><br><span class="line">go 1.15</span><br><span class="line">require github.com/Fors3cDream/calculator v0.0.0</span><br><span class="line">replace github.com/Fors3cDream/calculator =&gt; ../calculator</span><br></pre></td></tr></tbody></table></figure>
<p><code>replace</code>关键字指定使用本地目录，而不是模块的远程位置。</p>
<h5 id="发布模块"><a href="#发布模块" class="headerlink" title="发布模块"></a>发布模块</h5><p>需要在<code>github.com</code>下创建一个名为<code>calculator</code>(实际根据自己的包名来修改)的仓库。然后在<code>calculator</code>目录下执行如下命令：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git tag v0.1.0</span><br><span class="line"></span><br><span class="line">git push origin v0.1.0</span><br></pre></td></tr></tbody></table></figure>
        </div>

        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/ckmp12ga10005ejx90lx5ekz0.html"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Go控制流</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/ckmp12gac000sejx92sdfg5i0.html"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Python复习之装饰器、上下文管理器、生成器与迭代器</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>&nbsp;-&nbsp;
            
            2021&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Fors3c</a>
        </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动&nbsp;|&nbsp;主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.1</a>
        </div>
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    

    <div class="image-viewer-container">
    <img src="">
</div>


    

</main>



<script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/header-shrink.js"></script><script src="/js/back2top.js"></script><script src="/js/dark-light-toggle.js"></script>







<div class="post-scripts">
    
</div>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
